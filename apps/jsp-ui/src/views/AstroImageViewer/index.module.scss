// 选区按钮样式
.selectionButton {
  width: 100%;
  margin-bottom: 12px;
}

// Alert样式
.alertInfo {
  margin: 8px 0;
}

.alertWarning {
  margin: 8px 0;
}

// 测试窗口样式
.testWindowPre {
  max-height: 240px;
  overflow: auto;
  background: #f6f6f6;
  font-size: 13px;
}

// 悬浮坐标框样式
.hoverRaDecBox {
  position: absolute;
  top: 12px;
  right: 16px;
  z-index: 20;
  background: rgba(30, 32, 40, 0.92);
  color: #fff;
  padding: 5px 18px;
  border-radius: 6px;
  font-size: 14px;
  font-family: Menlo, Monaco, Consolas, monospace;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.18);
  white-space: nowrap;
  min-width: 220px;
  max-width: 320px;
  text-align: center;
  letter-spacing: 0.5px;
  line-height: 1.6;
  user-select: none;
}

.hoverRaDecBox .ra {
  color: #ffd666;
}

.hoverRaDecBox .dec {
  color: #91d5ff;
}

.astroViewer {
  padding: 0;
  background: #f5f5f5;
  height: 100vh;
  width: 100%;
  max-width: 100vw;
  overflow-x: hidden;
  box-sizing: border-box;

  * {
    box-sizing: border-box;
  }

  .title {
    text-align: center;
    margin-top: 0;
    margin-bottom: 0;
    color: #fff;
    background: #1890ff !important;
    padding: 8px;
    border-radius: 0;
  }

  .mainLayout {
    background: white;
    height: calc(100vh - 56px);
    margin-bottom: 0;
    border-radius: 0;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    width: 100%;
    max-width: 100vw;
    display: flex;
    flex-direction: row;
  }

  .leftSider {
    background: white;
    border-right: 1px solid #d9d9d9;
    padding: 8px 4px;
    flex-shrink: 0;
    min-width: 0;
    width: 220px;
    min-height: 100%;
    max-height: calc(100vh - 120px); /* 限制最大高度 */
    overflow: hidden auto; /* 添加垂直滚动 */ /* 隐藏水平滚动 */

    /* 美化滚动条 */
    &::-webkit-scrollbar {
      width: 6px;
    }

    &::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 3px;
    }

    &::-webkit-scrollbar-thumb {
      background: #c1c1c1;
      border-radius: 3px;

      &:hover {
        background: #a1a1a1;
      }
    }
  }

  .telescopeCard {
    margin-bottom: 16px;
    border-radius: 6px;

    .telescopeSection {
      .telescopeItem {
        margin-bottom: 16px;
        padding: 12px;
        border: 1px solid #f0f0f0;
        border-radius: 6px;
        background: #fafafa;

        &:last-child {
          margin-bottom: 0;
        }

        .telescopeHeader {
          margin-bottom: 8px;

          .ant-checkbox-wrapper {
            font-weight: 500;
            color: #1890ff;
          }
        }

        .filterGroup {
          margin-left: 24px;
          display: flex;
          flex-wrap: wrap;
          gap: 8px;

          .ant-checkbox-wrapper {
            margin: 0;
            font-size: 12px;
            color: #666;
            min-width: 60px;
          }
        }
      }
    }
  }

  .filtersCard {
    margin-bottom: 16px;
    border-radius: 6px;

    .filterSection {
      margin-bottom: 16px;

      &:last-child {
        margin-bottom: 0;
      }

      .filterOptions {
        margin-top: 8px;
        display: flex;
        flex-direction: column;
        gap: 4px;

        .ant-checkbox-wrapper {
          margin: 0;
          font-size: 12px;
        }
      }
    }
  }

  .dataCard {
    border-radius: 6px;

    .dataItem {
      padding: 4px 0;
      font-size: 12px;
      border-bottom: none;
    }
  }

  // Dropdown filter styles
  :global(.ant-dropdown-menu) {
    .ant-dropdown-menu-item {
      padding: 8px 12px;

      .ant-checkbox-wrapper {
        margin: 0;
        font-size: 12px;
        color: #666;
        width: 100%;

        &:hover {
          color: #1890ff;
        }
      }
    }
  }
}

.mainContent {
  padding: 0;
  display: flex;
  align-items: stretch;
  justify-content: stretch;
  position: relative;
  flex: 1;
  min-width: 0;
  overflow: hidden;

  .imageContainer {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: stretch;
    justify-content: stretch;

    .imageWrapper {
      position: relative;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: stretch;
      justify-content: stretch;

      .mainImage {
        width: 100%;
        height: 100%;
        position: relative;
        overflow: hidden;
        cursor: crosshair;
        display: flex;
        align-items: stretch;
        justify-content: stretch;

        &.selectionMode {
          position: relative;
          user-select: none;

          .selectionOverlay {
            // pointer-events: none;
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 5;

            .selectionInstructions {
              background: rgba(0, 0, 0, 0.8);
              color: #00d4ff;
              padding: 12px 24px;
              border-radius: 8px;
              font-size: 14px;
              font-weight: 500;
              border: 1px solid #00d4ff;
              backdrop-filter: blur(10px);
            }
          }
        }

        .selectionRectangle {
          position: absolute;
          border: 2px solid #00d4ff;
          background: rgba(0, 212, 255, 0.1);
          pointer-events: none;
          z-index: 10;
          border-radius: 4px;
          box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
        }
      }

      .cosmicBackground {
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          #1a237e 0%,
          #283593 25%,
          #3f51b5 50%,
          #5c6bc0 75%,
          #9c27b0 100%
        );
        position: relative;

        // Add some noise/texture to simulate cosmic background
        &::before {
          content: '';
          position: absolute;
          inset: 0;
          background: radial-gradient(
              circle at 20% 30%,
              rgba(255, 255, 0, 0.3) 2px,
              transparent 2px
            ),
            radial-gradient(
              circle at 80% 70%,
              rgba(0, 255, 255, 0.2) 1px,
              transparent 1px
            ),
            radial-gradient(
              circle at 40% 80%,
              rgba(255, 0, 255, 0.2) 1px,
              transparent 1px
            ),
            radial-gradient(
              circle at 90% 20%,
              rgba(255, 255, 255, 0.4) 1px,
              transparent 1px
            ),
            radial-gradient(
              circle at 10% 90%,
              rgba(255, 165, 0, 0.3) 2px,
              transparent 2px
            );
          background-size:
            50px 50px,
            30px 30px,
            40px 40px,
            20px 20px,
            60px 60px;
        }

        // Add gradient overlay for more realistic cosmic look
        &::after {
          content: '';
          position: absolute;
          inset: 0;
          background: radial-gradient(
              ellipse at 70% 30%,
              rgba(255, 255, 0, 0.1) 0%,
              transparent 50%
            ),
            radial-gradient(
              ellipse at 30% 70%,
              rgba(255, 165, 0, 0.1) 0%,
              transparent 40%
            ),
            radial-gradient(
              ellipse at 80% 80%,
              rgba(255, 20, 147, 0.1) 0%,
              transparent 30%
            );
        }

        .imageOverlay {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          z-index: 10;

          .zoomButton {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            color: #1890ff;
            font-weight: 500;

            &:hover {
              background: white;
              color: #40a9ff;
            }
          }
        }
      }

      .worldMapImage {
        width: 100%;
        height: 100%;
        object-fit: contain;
        background: #f8f9fa;
        cursor: crosshair;
      }
    }
  }
}

.rightSider {
  background: white;
  border-left: 1px solid #d9d9d9;
  padding: 8px 4px;
  flex-shrink: 0;
  min-width: 0;
  width: 220px;
  min-height: 100%;

  .coordinationCard {
    border-radius: 6px;
    margin-bottom: 16px;

    .coordinationItem {
      padding: 2px 0;
      border-bottom: none;

      .coordinationText {
        font-size: 11px;
        color: #666;
      }
    }
  }
}

// Mobile-only sections
.mobileLeftSider {
  display: none; // Hidden on desktop

  @media (width <= 768px) {
    display: block !important; // Show on mobile
    width: 100%;
    background: white;
    border-radius: 8px;
    margin-bottom: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    padding: 8px 4px;

    // Mobile-specific adjustments for cards
    .previewCard {
      .previewImage {
        height: 80px; // Increased height for mobile section

        .previewMapImage {
          width: 120px; // Increased width
          max-height: 70px; // Increased max height
          object-fit: contain;
          display: block;
          margin: 0 auto;
        }

        .previewPlaceholder {
          width: 120px;
          height: 70px;
          margin: 0 auto;
        }
      }
    }

    .telescopeCard {
      .telescopeSection {
        .telescopeItem {
          margin-bottom: 12px;
          padding: 8px;

          .telescopeHeader {
            margin-bottom: 6px;
          }
        }
      }
    }
  }
}

.mobileRightSider {
  display: none; // Hidden on desktop

  @media (width <= 768px) {
    display: block !important; // Show on mobile
    width: 100%;
    background: white;
    border-radius: 8px;
    margin-bottom: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    padding: 8px 4px;
  }
}

.imagesGallery {
  border-radius: 0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);

  .imageGrid {
    min-height: 120px;

    .thumbnailWrapper {
      .thumbnail {
        width: 100%;
        height: 80px;
        border-radius: 4px;
        overflow: hidden;
        border: 1px solid #d9d9d9;

        .thumbnailPlaceholder {
          width: 100%;
          height: 100%;
          background: linear-gradient(
              45deg,
              #f0f0f0 25%,
              transparent 25%,
              transparent 75%,
              #f0f0f0 75%,
              #f0f0f0
            ),
            linear-gradient(
              45deg,
              #f0f0f0 25%,
              transparent 25%,
              transparent 75%,
              #f0f0f0 75%,
              #f0f0f0
            );
          background-size: 20px 20px;
          background-position:
            0 0,
            10px 10px;
        }
      }
    }

    .viewMetaButton {
      width: 100%;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      border: 2px dashed #d9d9d9;
      background: #fafafa;

      &:hover {
        border-color: #1890ff;
        color: #1890ff;
      }
    }
  }
}

// Responsive design
@media (width <= 1400px) {
  .astroViewer {
    .leftSider {
      width: 200px !important;
    }

    .rightSider {
      width: 140px !important;
    }

    .mainContent {
      .imageContainer .imageWrapper {
        height: 500px;
      }
    }
  }
}

@media (width <= 1200px) {
  .astroViewer {
    .leftSider {
      width: 200px !important;
    }

    .rightSider {
      width: 140px !important;
    }

    .mainContent {
      .imageContainer .imageWrapper {
        height: 450px;
      }
    }

    .imagesGallery {
      .imageGrid {
        .thumbnailWrapper {
          .thumbnail {
            height: 60px;
          }
        }

        .viewMetaButton {
          height: 60px;
          font-size: 12px;
        }
      }
    }
  }
}

@media (width <= 992px) {
  .astroViewer {
    .mainLayout {
      .leftSider,
      .rightSider {
        display: none;
      }
    }

    .mainContent {
      .imageContainer .imageWrapper {
        height: 400px;
      }
    }

    .imagesGallery {
      .imageGrid {
        .thumbnailWrapper {
          .thumbnail {
            height: 70px;
          }
        }

        .viewMetaButton {
          height: 70px;
        }
      }
    }
  }
}

@media (width <= 768px) {
  .astroViewer {
    padding: 0;

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      padding: 8px;
      background: #e8e8e8;
      border-radius: 4px;

      .title {
        margin: 0;
        background: none;
        padding: 0;
      }

      .demoButton {
        background: #1890ff;
        border-color: #1890ff;

        &:hover {
          background: #40a9ff;
          border-color: #40a9ff;
        }
      }
    }

    .title {
      padding: 6px;
      margin-bottom: 6px;
      font-size: 18px;
    }

    .mainContent {
      padding: 6px;

      .imageContainer .imageWrapper {
        height: 300px;
      }
    }

    .imagesGallery {
      .imageGrid {
        .thumbnailWrapper {
          .thumbnail {
            height: 60px;
          }
        }

        .viewMetaButton {
          height: 60px;
          font-size: 11px;
        }
      }
    }
  }
}

@media (width <= 576px) {
  .astroViewer {
    padding: 0;

    .title {
      font-size: 16px;
      padding: 6px;
      margin-bottom: 8px;
    }

    .mainContent {
      padding: 8px;

      .imageContainer .imageWrapper {
        height: 250px;
      }
    }

    .imagesGallery {
      .imageGrid {
        .thumbnailWrapper {
          .thumbnail {
            height: 50px;
          }
        }

        .viewMetaButton {
          height: 50px;
          font-size: 10px;
          padding: 4px;
        }
      }
    }
  }
}

@media (width <= 480px) {
  .astroViewer {
    .mainLayout {
      min-height: 50vh; // Slightly smaller on very small screens
      margin: 0;
      padding: 12px;

      .mainContent {
        max-height: 75vh; // Increased height for mobile
        min-height: 60vh; // Ensure minimum height
        aspect-ratio: 4 / 3; // More square aspect ratio for mobile
      }
    }

    .mobileRightSider {
      margin: 0;
    }

    .imagesGallery {
      margin: 0;

      .imageGrid {
        .thumbnailWrapper {
          .thumbnail {
            height: 40px;
          }
        }

        .viewMetaButton {
          height: 40px;
          font-size: 9px;
        }
      }
    }
  }
}

// Additional styles for portrait orientation on mobile
@media (width <= 768px) and (orientation: portrait) {
  .astroViewer {
    .mainLayout {
      min-height: 50vh;

      .mainContent {
        max-height: 60vh;
        aspect-ratio: 4 / 3; // Better for portrait viewing
      }
    }
  }
}

// Additional styles for landscape orientation on mobile
@media (width <= 768px) and (orientation: landscape) {
  .astroViewer {
    .mainLayout {
      min-height: 70vh;

      .mainContent {
        max-height: 85vh; // Increased height for landscape mobile
        min-height: 70vh; // Ensure minimum height
        aspect-ratio: 16 / 9; // Cinematic for landscape
      }
    }
  }
}

// Responsive layout for vertical screens
@media (width <= 768px) {
  .astroViewer {
    display: flex;
    flex-direction: column;
    min-height: 100vh;

    .title {
      order: 1;
      margin-bottom: 16px;
    }

    .mobileLeftSider {
      order: 2; // Appears first, before main content
      margin-bottom: 16px;
    }

    .mainLayout {
      order: 3; // Main content comes after left sidebar
      flex-direction: column;
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 65vh; // Increased minimum height for mobile content
      background: #000; // Black background for cinematic effect
      border-radius: 0;
      padding: 20px;
      margin: 0;

      // Hide the original sidebars on mobile (they are replaced by mobile versions)
      .leftSider {
        display: none !important;
      }

      .rightSider {
        display: none !important;
      }

      .mainContent {
        width: 100% !important;
        height: 100% !important;
        max-width: 100%;
        max-height: 80vh; // Increased height for mobile main content
        min-height: 65vh; // Ensure minimum height
        aspect-ratio: 16 / 9; // Maintain cinematic aspect ratio
        padding: 0;
        flex: none;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);

        .imageContainer {
          width: 100%;
          height: 100%;

          .imageWrapper {
            width: 100%;
            height: 100%;

            .mainImage {
              width: 100%;
              height: 100%;
              border-radius: 8px;
              overflow: hidden;
            }
          }
        }
      }
    }

    .mobileRightSider {
      order: 4; // Appears after main content
      margin: 0;
    }

    .imagesGallery {
      order: 5; // Bottom section
      margin: 0;
    }
  }
}
